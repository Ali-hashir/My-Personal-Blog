{% extends 'blog/base.html' %}

{% block content %}
<section class="mt-5 pt-5">
  <!-- show an edit button if user is signed in -->
  {% if request.user.is_authenticated %}
  <div class="row">
    <div class="col-md-12">
      <a style="float: left; margin-left: 120px;" class="btn btn-danger" href="{% url 'edit_blog' blog.id %}">Delete Blog</a>
      <a class="btn btn-primary" href="{% url 'edit_blog' blog.id %}">EditBlog</a>
      <a style="float: right; margin-right: 120px;" class="btn btn-info" href="{% url 'home' %}">Home</a>
    </div>
  </div>
  {% endif %}

  <div class="container">


    <div class="row text-center">
      <div class="col-xl-10 mx-auto"><img class="img-fluid mb-5" src="/{{blog.image}}" alt=""></div>
    </div>
    <div class="row">
      <div class="col-xl-8 col-lg-10 mx-auto">
        <div class="text-content">
          <h1 class="mb-4">{{blog.title}}</h1>
          <!-- show tags in lighter color -->
          <p class="mb-4" style="color: #999;">Tags: {{blog.tags}}</p>
          <p class="mb-4">{{blog.description}}</p>
          <p class="mb-4">{{blog.content}}</p>
          <p class="mb-4">{{blog.author}}</p>
          <p class="mb-4">{{blog.date}}</p>

        </div>
      </div>
    </div>
  </div>
</section>





</html>

<script>
  //document ready function
  $(document).ready(function () {
    console.log("ready!");
    $.ajax({
      url: "{% url 'getLatestPosts' %}",
      type: "GET",
      dataType: "json",
      success: function (data) {
        console.log(data);
        console.log(data.posts[0].title);

        $('.banner_taital').removeClass('placeholder-glow placeholder');
        $('.banner_taital').text(data.posts[0].title);

        $('.banner_text').removeClass('placeholder-glow placeholder');
        var content = data.posts[0].content;
        if (content.length > 150) {
          content = content.substring(0, 150) + '...';
        }
        $('.banner_text').text(content);
        $('.read_bt').html('<a href="">Read More</a>');


      }
    })
  });
</script>

{% endblock %}